<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OurDrive</title>
  <link rel="stylesheet" href="./Pages/Style/styles.css" />
</head>

<body>
  <main>
    <div class="main">
      <div class="nav">
        <h1 id="" class="user">OurDrive</h1>
        <div class="profile-container">
          <p id="profile">User</p>
          <p class="sep"></p>
          <button class="logout-btn" onclick="logout()">Logout</button>
        </div>
      </div>
      <div id="tabSection" class="top-bar">
        <div id="options" class="options">
          <label class="file-upload">
            <span onclick="showShared()"><svg width="15" height="15" viewBox="0 0 16 16"
                xmlns="http://www.w3.org/2000/svg" fill="currentColor">
                <path
                  d="M3.14598 5.85423L7.64598 10.3542C7.84098 10.5492 8.15798 10.5492 8.35298 10.3542L12.853 5.85423C13.048 5.65923 13.048 5.34223 12.853 5.14723C12.658 4.95223 12.341 4.95223 12.146 5.14723L7.99998 9.29323L3.85398 5.14723C3.65898 4.95223 3.34198 4.95223 3.14698 5.14723C2.95198 5.34223 2.95098 5.65923 3.14598 5.85423Z" />
              </svg></span>
          </label>
          <div class="sharedDropDown" id="shareSelect">
            <span id="root" onclick="userSpace()">root</span>
          </div>

          <a id="rootPath" class="root" onclick="retrieveRootPath()">root</a>
          <p id="sep" class="sep">/</p>
        </div>
        <select id="chunk-size">
          <option value="auto">Auto</option>
          <option value="1">1MB</option>
          <option value="5">5MB</option>
          <option value="10">10MB</option>
          <option value="20">20MB</option>
          <option value="50">50MB</option>
          <option value="100">100MB</option>
          <option value="200">200MB</option>
        </select>
        <label class="file-upload">
          <input onchange="UploadFiles()" type="file" id="fileUpload" multiple />
          <span>Browse Files</span>
        </label>
        <label class="file-upload">
          <input onchange="uploadFolders()" type="file" id="folderUpload" directory webkitdirectory multiple />
          <span>Browse Folders (Beta)</span>
        </label>
      </div>
      <div id="tabSection" class="toolbar">
        <label class="file-upload">
          <span onclick="deleteSelected()">Delete</span>
        </label>
        <label class="file-upload">
          <span onclick="share()">Share</span>
        </label>
        <label class="new-folder">
          <span onclick="enterCode()">Enter Code</span>
          <input id="codeInput" class="folder-input" type="text" placeholder="Enter Code" />
        </label>
        <label class="file-upload">
          <span onclick="openModal()">Compress</span>
        </label>
        <label class="new-folder">
          <span onclick="newFolder()">New Folder</span>
          <input id="folderInput" class="folder-input" type="text" placeholder="Enter Folder Name" />
        </label>
      </div>
      <div class="tableContainer">
        <table class="table">
          <thead>
            <tr>
              <th><input type="checkbox" id="select-all" oninput="selectAll()"></th>
              <th>Action</th>
              <th id="name">Name â†‘</th>
              <th id="type">Type</th>
              <th id="size">Size</th>
              <th id="date">Date</th>
              <th id="mainOwner">mainOwner</th>
            </tr>
          </thead>
          <tbody id="files"></tbody>
        </table>
      </div>
      <div class="progress-tab">
        <div id="progressBar" class="upload-progress">
          <h1>Transfer Status</h1>
        </div>
        <div id="chunkBar" class="chunk-status">
          <h1>File Operation Status</h1>
          <div id="chunkStatus">
          </div>
        </div>
      </div>
      <div class="usage">
        <p id="userUsage"></p>
        <p id="usage"></p>
      </div>
    </div>
    <div class="modal-overlay" id="modalOverlay">
      <div class="modal">
        <button class="modal-close" onclick="closeModal()" aria-label="Close">ðŸ—™</button>
        <h2>Enter Details</h2>
        <div id="modalFailed" class="loginFailed hidden">
          <p>Name is required.</p>
          <p class="x-btn" onclick="closeModalError()">ðŸ—™</p>
        </div>
        <label for="username">File Name</label>
        <input type="text" id="fileName" placeholder="File name">

        <label for="level">Compression Level</label>
        <input type="range" id="level" min="0" max="9" value="0">

        <div class="modal-actions">
          <button class="confirm-btn" onclick="submitModal()">Confirm</button>
        </div>
      </div>
    </div>
  </main>
</body>
<script src="https://cdn.jsdelivr.net/npm/js-sha256@0.9.0/build/sha256.min.js"></script>
<script src="./Pages/js/script.js" defer></script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    updateProfile();
    getPathData();
    retrieveFile("/");
    getActiveTasks();
    activeFileOperationStatus();
    getUsage();
  });
</script>

</html>